<html>
<head>
  <title>Firebase integration</title>
</head>

<body>
<h1>Firebase integration instructions</h1>
<p>
  This service uses Firebase for authentication and push notifications. Follow the platform specific instructions below to setup and use the Firebase SDK. You may find the <a href="https://firebase.google.com/docs/reference/">Firebase API reference</a> useful when using the SDK on clients to implement authentication or push notifications.
</p>

<h2>Web</h2>

<h3>Setup</h3>
<p>
  None
</p>

<h3>Authentication</h3>
<p>
  Follow the Firebase instructions to setup either <a href="https://firebase.google.com/docs/auth/web/password-auth">password</a> or <a href="https://firebase.google.com/docs/auth/web/google-signin">Google</a> authentication. If you decide to use password authentication, you should at a minimum force the user to set a display name for their profile so other users can recognize them. Updating the user profile is described <a href="https://firebase.google.com/docs/auth/web/manage-users#update_a_users_profile">here</a>. You could potentially set the email as a display name. You can check the <a href="/#test-web-clients">test web clients</a> above for examples how to authenticate using either password sign-up/in or alternatively using Google sign-in.
</p>
<p>
  Once you have authenticated the user, you need to extract the authentication token from the response. You need to provide this token as part of the Authentication header for all API endpoints.
</p>

<h3>Push notifications</h3>
<p>
  Not available
</p>



<h2>Android</h2>
<h3>Setup</h3>
<p>
  Follow the <a href="https://firebase.google.com/docs/cloud-messaging/android/client">Android client setup instructions</a>. You will need the google-services.json file from Firebase. You can get it by providing your app package name to the backend admin, who will use the name to generate and send the file to you.
</p>

<h3>Authentication</h3>
<p>
  Follow the Firebase instructions to setup either <a href="https://firebase.google.com/docs/auth/android/password-auth">password</a> or <a href="https://firebase.google.com/docs/auth/android/google-signin">Google</a> authentication. If you decide to use Google authentication, you need to <a href="https://developers.google.com/android/guides/client-auth">extract the SHA1 of your signing certificate</a> and provide to the backend admin to enable it. If you decide to use password authentication, you should at a minimum force the user to set a display name for their profile so other users can recognize them. Updating the user profile is described <a href="https://firebase.google.com/docs/auth/android/manage-users#update_a_users_profile">here</a>. You could potentially set the email as a display name.
</p>
<p>
  Once you have authenticated the user, you need to extract the authentication token from the response. You need to provide this token as part of the Authentication header for all API endpoints.
</p>

<h3>Push notifications</h3>
<p>
  In order for the backend to send you notifications, you will need to refresh your notification token using the /users/{user-id}/notification-token endpoint whenever it changes. Follow the instructions for Android <a href="https://firebase.google.com/docs/cloud-messaging/downstream#receiving-messages-on-an-android-client-app">here</a>. It describes how you can capture the notification token on your app and then describes how you can configure your client to intercept notification messages that the backend sends to you through the push notification system.
</p>



<h2>iOS</h2>

<h3>Setup</h3>
<p>
  Follow the <a href="https://firebase.google.com/docs/cloud-messaging/ios/client">iOS client setup instructions</a>. You will need the GoogleService-Info.plist file from Firebase. You can get it by providing your iOS bundle ID to the backend admin, who will use the ID to generate and send the file to you. You will also need to <a href="https://firebase.google.com/docs/cloud-messaging/ios/certs">Provision APNs SSL Certificates</a>.
</p>

<h3>Authentication</h3>
<p>
  Follow the Firebase instructions to setup either <a href="https://firebase.google.com/docs/auth/ios/password-auth">password</a> or <a href="https://firebase.google.com/docs/auth/ios/google-signin">Google</a> authentication. If you decide to use password authentication, you should at a minimum force the user to set a display name for their profile so other users can recognize them. Updating the user profile is described <a href="https://firebase.google.com/docs/auth/ios/manage-users#update_a_users_profile">here</a>. You could potentially set the email as a display name.
</p>
<p>
  Once you have authenticated the user, you need to extract the authentication token from the response. You need to provide this token as part of the Authentication header for all API endpoints.
</p>

<h3>Push notifications</h3>
<p>
  In order for the backend to send you notifications, you will need to refresh your notification token using the /users/{user-id}/notification-token endpoint whenever it changes. Follow the instructions for iOS <a href="https://firebase.google.com/docs/cloud-messaging/downstream#receiving-messages-on-an-ios-client-app">here</a>. It describes how you can capture the notification token on your app and then describes how you can configure your client to intercept notification messages that the backend sends to you through the push notification system.
</p>

</body>
</html>
